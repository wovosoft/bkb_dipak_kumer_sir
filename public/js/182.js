(self.webpackChunk=self.webpackChunk||[]).push([[182],{182:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(8845),s=a(4719);const n={components:{TheTable:r.Z},mixins:[s.ZP],computed:{baseUrl:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return baseUrl()}))},data:function(){return{currentItem:null,permissions:[{text:"Access Users",value:"access_users"},{text:"Access Roles",value:"access_roles"},{text:"Access Projects",value:"access_projects"},{text:"Access Developers",value:"access_developers"}],fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"permissions",sortable:!0},{key:"action",thClass:"text-right",tdClass:"text-right"}]}},methods:{o2t:s.EI,initAddForm:function(){this.$set(this,"currentItem",{name:"",permissions:[]}),this.$bvModal.show("edit_modal")},handleSubmit:function(){var e=this;axios.post(this.baseUrl+"/backend/roles/store",JSON.parse(JSON.stringify(this.currentItem))).then((function(t){var a=t.data;console.log(a),e.$bvToast.toast(a.message,{title:a.title,autoHideDelay:3e3,appendToast:!0,variant:a.variant||"success"}),e.$refs.datatable.refresh(),e.$bvModal.hide("edit_modal")})).catch((function(t){var a=t.response;console.log(a.data),e.$bvToast.toast(a.data.message,{title:"Server Error",variant:"danger",autoHideDelay:3e3,appendToast:!0})}))}}};const i=(0,a(1900).Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("the-table",{attrs:{datatable:e.datatable,fields:e.fields},scopedSlots:e._u([{key:"header_buttons",fn:function(){return[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{attrs:{variant:"dark"},on:{click:e.initAddForm}},[a("b-icon-plus")],1)],1)]},proxy:!0}])},[e._v(" "),a("b-table",e._b({ref:"datatable",attrs:{"no-provider-filtering":!1,"api-url":e.baseUrl+"/backend/roles"},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:view_modal",arg:"view_modal"}],attrs:{variant:"dark",title:"View"},on:{click:function(a){e.currentItem=JSON.parse(JSON.stringify(t.item))}}},[a("b-icon-eye")],1),e._v(" "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:edit_modal",arg:"edit_modal"}],attrs:{variant:"warning",title:"Edit"},on:{click:function(a){e.currentItem=JSON.parse(JSON.stringify(t.item))}}},[a("b-icon-upload")],1),e._v(" "),a("b-button",{attrs:{variant:"danger",title:"Delete"}},[a("b-icon-trash")],1)],1)]}}])},"b-table",Object.assign({},e.attrs),!1))],1),e._v(" "),a("b-modal",e._b({attrs:{lazy:"",id:"edit_modal"},on:{hidden:function(t){e.currentItem=null}}},"b-modal",{bodyClass:"p-2",headerBgVariant:"dark",headerTextVariant:"light",title:"Add/Edit Role",hideFooter:!0},!1),[e.currentItem?a("b-form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("b-form-group",{attrs:{label:"Name"}},[a("b-input",{attrs:{placeholder:"Role Name"},model:{value:e.currentItem.name,callback:function(t){e.$set(e.currentItem,"name",t)},expression:"currentItem.name"}})],1),e._v(" "),a("b-form-group",{attrs:{label:"Permissions"}},[a("b-form-checkbox-group",{staticClass:"mb-3",attrs:{stacked:"",options:e.permissions,"value-field":"value","text-field":"text"},model:{value:e.currentItem.permissions,callback:function(t){e.$set(e.currentItem,"permissions",t)},expression:"currentItem.permissions"}})],1),e._v(" "),a("b-button",{attrs:{type:"submit",variant:"dark",block:""}},[e._v("SUBMIT")])],1):e._e()],1),e._v(" "),a("b-modal",e._b({attrs:{lazy:"",id:"view_modal"},on:{hidden:function(t){e.currentItem=null}}},"b-modal",{bodyClass:"p-2",headerBgVariant:"dark",headerTextVariant:"light",title:"View Details"},!1),[e.currentItem?a("b-table",{attrs:{"thead-class":"d-none",bordered:"",hover:"",striped:"",small:"","head-variant":"dark",items:e.o2t(e.currentItem)},scopedSlots:e._u([{key:"cell(key)",fn:function(t){return[e._v("\n                "+e._s(e._f("startCase")(t.item.key))+"\n            ")]}},{key:"cell(value)",fn:function(t){return[["created_at","updated_at"].includes(t.item.key)?[e._v("\n                    "+e._s(e._f("dayjs")(t.item.value))+"\n                ")]:[e._v("\n                    "+e._s(t.item.value)+"\n                ")]]}}],null,!1,4228248442)}):e._e()],1)],1)}),[],!1,null,null,null).exports}}]);