(self.webpackChunk=self.webpackChunk||[]).push([[719],{356:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>d});var r=a(515),n=a(719);const i={props:{item:{type:Object,default:null}},methods:{o2t:n.EI}};var s=a(900);const l=(0,s.Z)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",t._b({attrs:{lazy:"",id:"view_modal"},on:{hidden:function(e){return t.$emit("hidden",!0)}}},"b-modal",{size:"xl",bodyClass:"p-2",headerBgVariant:"dark",headerTextVariant:"light",title:"View Details"},!1),[a("b-form-row",[a("b-col",{attrs:{md:"3",sm:"12"}},[t.item?a("b-img-lazy",{attrs:{thumbnail:"","fluid-grow":"",src:"storage/"+t.item.profile_photo}}):t._e()],1),t._v(" "),a("b-col",{attrs:{md:"9",sm:"12"}},[a("b-card",{attrs:{title:"Overview","body-class":"p-2"}},[t.item?a("b-table",{attrs:{"thead-class":"d-none",small:"","head-variant":"dark",items:t.o2t(t.item,["email_verified_at","personal_info","academic_info","contact_info","professional_info","family_members","role_id","profile_photo"])},scopedSlots:t._u([{key:"cell(key)",fn:function(e){return[t._v("\n                        "+t._s(t._f("startCase")(e.item.key))+"\n                    ")]}},{key:"cell(value)",fn:function(e){return[["created_at","updated_at"].includes(e.item.key)?[t._v("\n                            "+t._s(t._f("dayjs")(e.item.value))+"\n                        ")]:[t._v("\n                            "+t._s(e.item.value)+"\n                        ")]]}}],null,!1,1439422842)}):t._e()],1)],1)],1),t._v(" "),a("b-card",{staticClass:"mt-2",attrs:{title:"Personal Information","body-class":"p-2"}},[t.item?a("b-table",{attrs:{"thead-class":"d-none",small:"","head-variant":"dark",items:t.o2t(t.item.personal_info,[])},scopedSlots:t._u([{key:"cell(key)",fn:function(e){return[t._v("\n                "+t._s(t._f("startCase")(e.item.key))+"\n            ")]}}],null,!1,2496100515)}):t._e()],1),t._v(" "),a("b-card",{staticClass:"mt-2",attrs:{title:"Academic Information","body-class":"p-2"}},[t.item?a("b-table",{attrs:{small:"","head-variant":"dark",items:t.item.academic_info}}):t._e()],1),t._v(" "),a("b-card",{staticClass:"mt-2",attrs:{title:"Contact Information","body-class":"p-2"}},[t.item?a("b-table",{attrs:{small:"",fields:["id","type","content","created_at"],"head-variant":"dark",items:t.item.contact_info},scopedSlots:t._u([{key:"cell(created_at)",fn:function(e){return[t._v("\n                "+t._s(t._f("dayjs")(e.item.created_at))+"\n            ")]}}],null,!1,642849522)}):t._e()],1),t._v(" "),t.item&&t.item.professional_info?a("b-card",{staticClass:"mt-2",attrs:{title:"Professional Information","body-class":"p-2"}},[a("b-table",{attrs:{small:"","head-variant":"dark",fields:["id","title","position","institution",{key:"starting_date",label:"From"},{key:"ending_date",label:"To"},"description","files",{key:"created_at",formatter:function(e){return t.$options.filters.dayjs(t.d1)}}],items:t.item.professional_info}})],1):t._e(),t._v(" "),a("b-card",{staticClass:"mt-2",attrs:{title:"Family Members","body-class":"p-2"}},[t.item?a("b-table",{attrs:{fields:["id","relation","first_name","mid_name","last_name",{key:"date_of_birth",label:"DOB"},"nid","nationality","gender","description"],small:"","head-variant":"dark",items:t.item.family_members}}):t._e()],1)],1)}),[],!1,null,"0c3a8378",null).exports,o={components:{TheTable:r.Z,ViewProfile:l},mixins:[n.ZP],computed:{baseUrl:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return baseUrl()})),roles:function(){return window.s("roles")}},data:function(){var t=this;return{currentItem:null,fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"email",sortable:!0},{key:"created_at",sortable:!0,formatter:function(e){return t.$options.filters.dayjs(e)}},{key:"action",thClass:"text-right",tdClass:"text-right"}]}},methods:{o2t:n.EI,handleSubmit:function(){var t=this;axios.post(this.baseUrl+"/backend/users/store",JSON.parse(JSON.stringify(this.currentItem))).then((function(e){var a=e.data;console.log(a),t.$bvToast.toast(a.message,{title:a.title,autoHideDelay:3e3,appendToast:!0,variant:a.variant||"success"}),t.$refs.datatable.refresh(),t.$bvModal.hide("edit_modal")})).catch((function(e){var a=e.response;console.log(a.data),t.$bvToast.toast(a.data.message,{title:"Server Error",variant:"danger",autoHideDelay:3e3,appendToast:!0})}))}}};const d=(0,s.Z)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("the-table",{attrs:{datatable:t.datatable,fields:t.fields},scopedSlots:t._u([{key:"header_buttons",fn:function(){return[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:edit_modal",arg:"edit_modal"}],attrs:{variant:"dark"},on:{click:function(e){t.currentItem={name:null,email:null,password:null}}}},[a("b-icon-plus")],1)],1)]},proxy:!0}])},[t._v(" "),a("b-table",t._b({ref:"datatable",attrs:{"no-provider-filtering":!1,"api-url":t.baseUrl+"/backend/users"},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:view_modal",arg:"view_modal"}],attrs:{variant:"dark",title:"View"},on:{click:function(a){t.currentItem=JSON.parse(JSON.stringify(e.item))}}},[a("b-icon-eye")],1),t._v(" "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:edit_modal",arg:"edit_modal"}],attrs:{variant:"warning",title:"Edit"},on:{click:function(a){t.currentItem=JSON.parse(JSON.stringify(e.item))}}},[a("b-icon-pencil-square")],1),t._v(" "),a("b-button",{attrs:{variant:"danger",title:"Delete"}},[a("b-icon-trash")],1)],1)]}}])},"b-table",Object.assign({},t.attrs),!1))],1),t._v(" "),a("b-modal",t._b({attrs:{lazy:"",id:"edit_modal"},on:{hidden:function(e){t.currentItem=null}}},"b-modal",{bodyClass:"p-2",headerBgVariant:"dark",headerTextVariant:"light",title:"Add/Edit User",hideFooter:!0},!1),[t.currentItem?a("b-form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("b-form-group",{attrs:{label:"Name"}},[a("b-input",{attrs:{placeholder:"User Name"},model:{value:t.currentItem.name,callback:function(e){t.$set(t.currentItem,"name",e)},expression:"currentItem.name"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Email"}},[a("b-input",{attrs:{placeholder:"User Email Address"},model:{value:t.currentItem.email,callback:function(e){t.$set(t.currentItem,"email",e)},expression:"currentItem.email"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Role"}},[a("b-select",{attrs:{required:"","text-field":"name","value-field":"id",options:t.roles},model:{value:t.currentItem.role_id,callback:function(e){t.$set(t.currentItem,"role_id",e)},expression:"currentItem.role_id"}})],1),t._v(" "),a("b-form-group",{attrs:{label:"Password"}},[a("b-input",{attrs:{type:"password"},model:{value:t.currentItem.password,callback:function(e){t.$set(t.currentItem,"password",e)},expression:"currentItem.password"}})],1),t._v(" "),a("b-button",{attrs:{type:"submit",variant:"dark",block:""}},[t._v("SUBMIT")])],1):t._e()],1),t._v(" "),a("view-profile",{attrs:{item:t.currentItem},on:{hidden:function(e){t.currentItem=null}}})],1)}),[],!1,null,null,null).exports}}]);