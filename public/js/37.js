(self.webpackChunk=self.webpackChunk||[]).push([[37],{4037:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var i=r(1515),n=r(4719);const a={components:{TheTable:i.Z},mixins:[n.ZP],computed:{baseUrl:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return baseUrl()}))},mounted:function(){this.getDivisions()},data:function(){return{currentItem:null,divisional_offices:[],crm_rm_offices:[],appends:{crm_rm_office_id:null,divisional_office_id:null},fields:[{key:"id",sortable:!0},{key:"branch_name",sortable:!0},{key:"branch_code",sortable:!0},{key:"routing_no",sortable:!0,visible:!1},{key:"divisional_office",sortable:!1,formatter:function(e){return e?e.name:null}},{key:"crm_rm_office",sortable:!1,formatter:function(e){return e?e.name:null}},{key:"city",sortable:!0,visible:!1},{key:"zip",sortable:!0,visible:!1},{key:"address",sortable:!0,visible:!1},{key:"action",thClass:"text-right",tdClass:"text-right"}]}},methods:{o2t:n.EI,initAddForm:function(){this.$set(this,"currentItem",{crm_rm_office_id:null,divisional_office_id:null,branch_name:null,branch_code:null,routing_no:null,address:null,city:null,zip:null}),this.$bvModal.show("edit_modal")},handleSubmit:function(){var e=this;axios.post(this.baseUrl+"/backend/branches/store",JSON.parse(JSON.stringify(this.currentItem))).then((function(t){var r=t.data;console.log(r),e.$bvToast.toast(r.message,{title:r.title,autoHideDelay:3e3,appendToast:!0,variant:r.variant||"success"}),e.$refs.datatable.refresh(),e.$bvModal.hide("edit_modal")})).catch((function(t){var r=t.response;console.log(r.data),e.$bvToast.toast(r.data.message,{title:"Server Error",variant:"danger",autoHideDelay:3e3,appendToast:!0})}))},getDivisions:function(){var e=this;axios.post(this.baseUrl+"/backend/divisional_offices/list").then((function(t){var r=t.data;e.divisional_offices=r})).catch((function(t){var r=t.response;e.divisional_offices=[],console.log(r.data)}))},getCrmRmOffices:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t||this.currentItem.divisional_office_id?axios.post(this.baseUrl+"/backend/crm_rm_offices/list",{divisional_office_id:t||this.currentItem.divisional_office_id}).then((function(t){var r=t.data;e.crm_rm_offices=r})).catch((function(t){var r=t.response;e.crm_rm_offices=[],console.log(r.data)})):(this.$set(this,"crm_rm_offices",[]),this.$set(this.currentItem,"crm_rm_office_id",null))}}};const o=(0,r(1900).Z)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-row",[r("b-col",{attrs:{md:"4",sm:"12"}},[r("b-form-group",{attrs:{label:"Divisional Office"}},[r("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[r("b-button",{on:{click:function(){e.appends.divisional_office_id=null,e.crm_rm_offices=[]}}},[r("b-icon-trash")],1)]},proxy:!0}])},[r("b-select",{attrs:{"text-field":"name","value-field":"id",options:e.divisional_offices},on:{input:e.getCrmRmOffices},model:{value:e.appends.divisional_office_id,callback:function(t){e.$set(e.appends,"divisional_office_id",t)},expression:"appends.divisional_office_id"}})],1)],1)],1),e._v(" "),r("b-col",{attrs:{md:"4",sm:"12"}},[r("b-form-group",{attrs:{label:"CRM-RM Office"}},[r("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[r("b-button",{on:{click:function(t){e.appends.crm_rm_office_id=null}}},[r("b-icon-trash")],1)]},proxy:!0}])},[r("b-select",{attrs:{"text-field":"name","value-field":"id",options:e.crm_rm_offices},model:{value:e.appends.crm_rm_office_id,callback:function(t){e.$set(e.appends,"crm_rm_office_id",t)},expression:"appends.crm_rm_office_id"}})],1)],1)],1),e._v(" "),r("b-col",[r("b-form-group",{scopedSlots:e._u([{key:"label",fn:function(){return[e._v("Â ")]},proxy:!0}])},[e._v(" "),r("b-button",{attrs:{block:"",variant:"dark"},on:{click:function(t){return e.$refs.datatable.refresh()}}},[r("b-icon-search"),e._v("\n                    SEARCH\n                ")],1)],1)],1)],1),e._v(" "),r("the-table",{attrs:{datatable:e.datatable,fields:e.fields},scopedSlots:e._u([{key:"header_buttons",fn:function(){return[r("b-button-group",{attrs:{size:"sm"}},[r("b-button",{attrs:{variant:"dark"},on:{click:e.initAddForm}},[r("b-icon-plus")],1)],1)]},proxy:!0}])},[e._v(" "),r("b-table",e._b({ref:"datatable",attrs:{"no-provider-filtering":!1,"api-url":e.baseUrl+"/backend/branches"},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[r("b-button-group",{attrs:{size:"sm"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:view_modal",arg:"view_modal"}],attrs:{variant:"dark",title:"View"},on:{click:function(r){e.currentItem=JSON.parse(JSON.stringify(t.item))}}},[r("b-icon-eye")],1),e._v(" "),r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:edit_modal",arg:"edit_modal"}],attrs:{variant:"warning",title:"Edit"},on:{click:function(r){e.currentItem=JSON.parse(JSON.stringify(t.item))}}},[r("b-icon-pencil-square")],1),e._v(" "),r("b-button",{attrs:{variant:"danger",title:"Delete"}},[r("b-icon-trash")],1)],1)]}}])},"b-table",Object.assign({},e.attrs),!1))],1),e._v(" "),r("b-modal",e._b({attrs:{lazy:"",id:"edit_modal"},on:{shown:function(){e.currentItem.divisional_office_id&&e.getCrmRmOffices()},hidden:function(){e.currentItem=null,e.crm_rm_offices=[]}}},"b-modal",{size:"lg",bodyClass:"p-2",headerBgVariant:"dark",headerTextVariant:"light",title:"Add/Edit Branch",hideFooter:!0},!1),[e.currentItem?r("b-form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[r("b-form-row",[r("b-col",{attrs:{md:"6",sm:"12"}},[r("b-form-group",{attrs:{label:"Divisional Office *"}},[r("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[r("b-button",{on:{click:function(){e.currentItem.divisional_office_id=null,e.currentItem.crm_rm_office_id=null,e.crm_rm_offices=[]}}},[r("b-icon-trash")],1)]},proxy:!0}],null,!1,1422424079)},[r("b-select",{attrs:{required:!0,"text-field":"name","value-field":"id",options:e.divisional_offices},on:{input:e.getCrmRmOffices},model:{value:e.currentItem.divisional_office_id,callback:function(t){e.$set(e.currentItem,"divisional_office_id",t)},expression:"currentItem.divisional_office_id"}})],1)],1)],1),e._v(" "),r("b-col",{attrs:{md:"6",sm:"12"}},[r("b-form-group",{attrs:{label:"Divisional Office *"}},[r("b-select",{attrs:{required:!0,"text-field":"name","value-field":"id",options:e.crm_rm_offices},model:{value:e.currentItem.crm_rm_office_id,callback:function(t){e.$set(e.currentItem,"crm_rm_office_id",t)},expression:"currentItem.crm_rm_office_id"}})],1)],1)],1),e._v(" "),r("b-form-row",[r("b-col",{attrs:{md:"6",sm:"12"}},[r("b-form-group",{attrs:{label:"Branch Name"}},[r("b-input",{attrs:{required:!0,placeholder:"Branch Name"},model:{value:e.currentItem.branch_name,callback:function(t){e.$set(e.currentItem,"branch_name",t)},expression:"currentItem.branch_name"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"6",sm:"12"}},[r("b-form-group",{attrs:{label:"Branch Code"}},[r("b-input",{attrs:{required:!0,placeholder:"Branch Code"},model:{value:e.currentItem.branch_code,callback:function(t){e.$set(e.currentItem,"branch_code",t)},expression:"currentItem.branch_code"}})],1)],1)],1),e._v(" "),r("b-form-row",[r("b-col",{attrs:{md:"6",sm:"12"}},[r("b-form-group",{attrs:{label:"Routing No"}},[r("b-input",{attrs:{placeholder:"Branch Routing No"},model:{value:e.currentItem.routing_no,callback:function(t){e.$set(e.currentItem,"routing_no",t)},expression:"currentItem.routing_no"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"6",sm:"12"}},[r("b-form-group",{attrs:{label:"City"}},[r("b-input",{attrs:{placeholder:"Branch City"},model:{value:e.currentItem.city,callback:function(t){e.$set(e.currentItem,"city",t)},expression:"currentItem.city"}})],1)],1)],1),e._v(" "),r("b-form-row",[r("b-col",{attrs:{md:"6",sm:"12"}},[r("b-form-group",{attrs:{label:"ZIP"}},[r("b-input",{attrs:{placeholder:"Branch ZIP"},model:{value:e.currentItem.zip,callback:function(t){e.$set(e.currentItem,"zip",t)},expression:"currentItem.zip"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"6",sm:"12"}},[r("b-form-group",{attrs:{label:"Address"}},[r("b-textarea",{attrs:{placeholder:"Branch Address"},model:{value:e.currentItem.address,callback:function(t){e.$set(e.currentItem,"address",t)},expression:"currentItem.address"}})],1)],1)],1),e._v(" "),r("b-button",{attrs:{type:"submit",variant:"dark",block:""}},[e._v("SUBMIT")])],1):e._e()],1),e._v(" "),r("b-modal",e._b({attrs:{lazy:"",id:"view_modal"},on:{hidden:function(t){e.currentItem=null}}},"b-modal",{bodyClass:"p-2",headerBgVariant:"dark",headerTextVariant:"light",title:"View Details"},!1),[e.currentItem?r("b-table",{attrs:{"thead-class":"d-none",bordered:"",hover:"",striped:"",small:"","head-variant":"dark",items:e.o2t(e.currentItem,["crm_rm_office_id","divisional_office_id"])},scopedSlots:e._u([{key:"cell(key)",fn:function(t){return[e._v("\n                "+e._s(e._f("startCase")(t.item.key))+"\n            ")]}},{key:"cell(value)",fn:function(t){return[["created_at","updated_at"].includes(t.item.key)?[e._v("\n                    "+e._s(e._f("dayjs")(t.item.value))+"\n                ")]:[e._v("\n                    "+e._s(t.item.value)+"\n                ")]]}}],null,!1,4228248442)}):e._e()],1)],1)}),[],!1,null,null,null).exports}}]);