(self.webpackChunk=self.webpackChunk||[]).push([[729],{2346:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var a=n(3645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,"#loan-types-accordion .not-collapsed{background-color:#000;color:#fff}",""]);const o=r},729:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var a=n(1515),r=n(4719);const o={name:"AddDocument",props:{item:{type:Object,default:function(){return{}}}},mounted:function(){this.form=Object.assign({},this.form,this.item)},data:function(){return{form:{loan_type_id:null,loan_sub_type_id:null,is_mandatory:!1,title:null}}},methods:{handleSubmit:function(){var t=this;axios.post(baseUrl()+"/backend/document_types/store",JSON.parse(JSON.stringify(this.form))).then((function(e){console.log(e.data),t.$root.msgBox(e.data),t.$emit("success",e.data)})).catch((function(e){t.$root.msgBox(e.response.data),t.$emit("failed",e.response.data),console.log(e.response.data)}))}}};var i=n(1900);const s=(0,i.Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{label:"Title"}},[n("b-input",{attrs:{placeholder:"Document Title",required:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("b-form-group",{attrs:{label:"Is Mandatory"}},[n("b-form-checkbox",{model:{value:t.form.is_mandatory,callback:function(e){t.$set(t.form,"is_mandatory",e)},expression:"form.is_mandatory"}},[t._v("\n            Is Mandatory?\n        ")])],1),t._v(" "),n("b-button",{attrs:{type:"submit",block:"",variant:"dark"}},[t._v("\n        SUBMIT\n    ")])],1)}),[],!1,null,"c0e46afe",null).exports;const l={name:"AddSubType",props:{item:{type:Object,default:function(){return{}}}},mounted:function(){this.form=Object.assign({},this.form,this.item)},data:function(){return{form:{loan_type_id:null,title:null}}},methods:{handleSubmit:function(){var t=this;axios.post(baseUrl()+"/backend/loan_sub_types/store",JSON.parse(JSON.stringify(this.form))).then((function(e){console.log(e.data),t.$root.msgBox(e.data),t.$emit("success",e.data)})).catch((function(e){t.$root.msgBox(e.response.data),t.$emit("failed",e.response.data),console.log(e.response.data)}))}}};const d=(0,i.Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{label:"Title"}},[n("b-input",{attrs:{placeholder:"Document Title",required:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("b-button",{attrs:{type:"submit",block:"",variant:"dark"}},[t._v("\n        SUBMIT\n    ")])],1)}),[],!1,null,"7b6da450",null).exports,u={components:{TheTable:a.Z,AddDocument:s,AddSubType:d},mixins:[r.ZP],computed:{baseUrl:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return baseUrl()}))},data:function(){return{currentItem:null,currentSubtype:null,currentDocument:null,form_sub_type:{title:null},document_type_form:{title:null,is_mandatory:!1},fields:[{key:"id",sortable:!0},{key:"title",sortable:!0},{key:"action",thClass:"text-right",tdClass:"text-right"}]}},methods:{o2t:r.EI,initAddForm:function(){this.$set(this,"currentItem",{name:null,address:null}),this.$bvModal.show("edit_modal")},handleSubmit:function(){var t=this;axios.post(this.baseUrl+"/backend/loan_types/store",JSON.parse(JSON.stringify(this.currentItem))).then((function(e){var n=e.data;console.log(n),t.$bvToast.toast(n.message,{title:n.title,autoHideDelay:3e3,appendToast:!0,variant:n.variant||"success"}),t.$refs.datatable.refresh(),t.$bvModal.hide("edit_modal")})).catch((function(e){var n=e.response;console.log(n.data),t.$bvToast.toast(n.data.message,{title:"Server Error",variant:"danger",autoHideDelay:3e3,appendToast:!0})}))},getCrmRmOffices:function(t){var e=this;axios.post(this.baseUrl+"/backend/crm_rm_offices/list",{divisional_office_id:t.id}).then((function(t){var n=t.data;e.crm_rm_offices=n})).catch((function(t){var n=t.response;e.crm_rm_offices=[],console.log(n.data)}))},trashSubType:function(t){var e=this;confirm("Are You Sure?")&&axios.post(this.baseUrl+"/backend/loan_sub_types/delete/"+t).then((function(t){var n=t.data;e.$root.msgBox(n),e.$refs.datatable.refresh()})).catch((function(t){var n=t.response;e.$root.msgBox(n.data),console.log(n.data)}))},trashDocType:function(t){var e=this;confirm("Are You Sure?")&&axios.post(this.baseUrl+"/backend/document_types/delete/"+t).then((function(t){var n=t.data;e.$root.msgBox(n),e.$refs.datatable.refresh()})).catch((function(t){var n=t.response;e.$root.msgBox(n.data),console.log(n.data)}))}}};var c=n(3379),m=n.n(c),b=n(2346),f={insert:"head",singleton:!1};m()(b.Z,f);b.Z.locals;const p=(0,i.Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("the-table",{attrs:{datatable:t.datatable,fields:t.fields},scopedSlots:t._u([{key:"header_buttons",fn:function(){return[n("b-button-group",{attrs:{size:"sm"}},[n("b-button",{attrs:{variant:"dark"},on:{click:t.initAddForm}},[n("b-icon-plus")],1)],1)]},proxy:!0}])},[t._v(" "),n("b-table",t._b({ref:"datatable",attrs:{"no-provider-filtering":!1,"api-url":t.baseUrl+"/backend/loan_types"},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[n("b-button-group",{attrs:{size:"sm"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:loan_type_details",arg:"loan_type_details"}],attrs:{variant:"dark",title:"Details"},on:{click:e.toggleDetails}},[n("b-icon-eye")],1),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:edit_modal",arg:"edit_modal"}],attrs:{variant:"warning",title:"Edit"},on:{click:function(n){t.currentItem=JSON.parse(JSON.stringify(e.item))}}},[n("b-icon-pencil-square")],1),t._v(" "),n("b-button",{attrs:{variant:"danger",title:"Delete"}},[n("b-icon-trash")],1)],1)]}},{key:"row-details",fn:function(e){return[n("b-form-row",[n("b-col",{attrs:{md:"4",sm:"12"}},[n("div",[n("h5",{staticClass:"d-inline"},[t._v("\n                                Loan Sub Types\n                            ")]),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:add-sub-type",arg:"add-sub-type"}],staticClass:"float-right",attrs:{variant:"dark",title:"Add Sub Type",size:"sm"},on:{click:function(n){t.currentSubtype={loan_type_id:e.item.id,title:null}}}},[t._v("\n                                Add\n                            ")])],1),t._v(" "),n("br"),t._v(" "),n("b-list-group",t._l(e.item.sub_types,(function(e,a){return n("b-list-group-item",{key:a,staticClass:"p-1 border-0"},[n("b-input-group",{attrs:{size:"sm"},scopedSlots:t._u([{key:"append",fn:function(){return[n("b-button-group",{attrs:{size:"sm"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:add-sub-type",arg:"add-sub-type"}],attrs:{variant:"dark"},on:{click:function(n){t.currentSubtype=JSON.parse(JSON.stringify(e))}}},[n("b-icon-pencil-square")],1),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(n){return t.trashSubType(e.id)}}},[n("b-icon-trash")],1)],1)]},proxy:!0}],null,!0)},[n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"doc-acc-"+e.id,expression:"'doc-acc-'+st.id"}],staticClass:"form-control"},[t._v("\n                                        "+t._s([e.id,e.title].join(" | "))+"\n                                    ")])])],1)})),1)],1),t._v(" "),n("b-col",{attrs:{md:"8",sm:"12"}},[n("div",{staticClass:"accordion",attrs:{role:"tablist"}},t._l(e.item.sub_types,(function(a,r){return n("b-collapse",{key:r,attrs:{accordion:"doc-accordion-"+e.item.id,role:"tabpanel",id:"doc-acc-"+a.id}},[n("b-card",{attrs:{"no-body":"","header-class":"text-right"},scopedSlots:t._u([{key:"header",fn:function(){return[n("h5",{staticClass:"d-inline"},[t._v("\n                                            Document Types of "),n("strong",[t._v(t._s(a.title))])]),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:add-document",arg:"add-document"}],attrs:{variant:"dark",size:"sm"},on:{click:function(n){t.currentDocument={loan_type_id:e.item.id,loan_sub_type_id:a.id,title:null,is_mandatory:!1}}}},[t._v("\n                                            Add\n                                        ")])]},proxy:!0}],null,!0)},[t._v(" "),n("b-table-lite",{attrs:{"head-variant":"dark",items:a.document_types,fields:["id","title","is_mandatory",{key:"action",thClass:"text-right",tdClass:"text-right"}]},scopedSlots:t._u([{key:"cell(is_mandatory)",fn:function(e){return[t._v("\n                                            "+t._s(Number(e.item.is_mandatory)?"YES":"NO")+"\n                                        ")]}},{key:"cell(action)",fn:function(e){return[n("b-button-group",{attrs:{size:"sm"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal:add-document",arg:"add-document"}],attrs:{variant:"warning",title:"Edit Document"},on:{click:function(){t.currentDocument=Object.assign({},JSON.parse(JSON.stringify(e.item)),{is_mandatory:!!Number(e.item.is_mandatory)})}}},[n("b-icon-pencil-square")],1),t._v(" "),n("b-button",{attrs:{variant:"danger",title:"Delete Document Type"},on:{click:function(n){return t.trashDocType(e.item.id)}}},[n("b-icon-trash")],1)],1)]}}],null,!0)})],1)],1)})),1)])],1)]}}])},"b-table",Object.assign({},t.attrs),!1))],1),t._v(" "),n("b-modal",t._b({attrs:{lazy:"",id:"edit_modal"},on:{hidden:function(e){t.currentItem=null}}},"b-modal",{size:"md",bodyClass:"p-2",headerBgVariant:"dark",headerTextVariant:"light",title:"Add/Edit Loan Type",hideFooter:!0},!1),[t.currentItem?n("b-form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{label:"Title"}},[n("b-input",{attrs:{required:!0,placeholder:"Name"},model:{value:t.currentItem.title,callback:function(e){t.$set(t.currentItem,"title",e)},expression:"currentItem.title"}})],1),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"dark",block:""}},[t._v("SUBMIT")])],1):t._e()],1),t._v(" "),n("b-modal",{attrs:{id:"add-document","hide-footer":"","header-bg-variant":"dark","header-text-variant":"light",title:"Add Document Type"},on:{hidden:function(e){t.currentDocument=null}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.hide;return[t.currentDocument?n("add-document",{attrs:{item:t.currentDocument},on:{success:function(e){a(),t.$refs.datatable.refresh()}}}):t._e()]}}])}),t._v(" "),n("b-modal",{attrs:{id:"add-sub-type","hide-footer":"","header-bg-variant":"dark","header-text-variant":"light",title:"Add Document Type"},on:{hidden:function(e){t.currentSubtype=null}},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.hide;return[t.currentSubtype?n("add-sub-type",{attrs:{item:t.currentSubtype},on:{success:function(e){a(),t.$refs.datatable.refresh()}}}):t._e()]}}])})],1)}),[],!1,null,null,null).exports}}]);